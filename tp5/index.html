<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>TP5 - Application M√©t√©o</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.css" />

    <!-- Weather Icons CSS -->
    <link rel="stylesheet" href="css/weather-icons.min.css" />

    <!-- Leaflet CSS (pour la carte) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <style>
        body { margin-top: 20px; }
        a.list-group-item { cursor: pointer; }
        .weather-card { margin-top: 15px; }
        .weather-icon { font-size: 48px; }
        #map { height: 300px; margin-top: 15px; }
    </style>
</head>
<body>

<div id="weatherApp" class="container">
    <h1 class="my-3">üå§ Application M√©t√©o</h1>

    <!-- BOUTON MA POSITION -->
    <button class="btn btn-success mb-3" @click="getMyLocation">üåç Ma position</button>

    <!-- FORMULAIRE -->
    <form v-on:submit.prevent="addCity" class="mb-3">
        <div class="input-group">
            <input type="search" class="form-control" v-model="formCityName" placeholder="Rechercher une ville..." required autofocus/>
            <button class="btn btn-primary" type="submit">Ajouter</button>
        </div>
        <small class="text-muted">{{ formCityName.length }} caract√®res</small>
        <div class="alert alert-danger mt-2" v-if="messageForm != ''">
            {{ messageForm }}
        </div>
    </form>

    <!-- LISTE DES VILLES -->
    <h4>Liste des villes ({{ cityList.length }})</h4>
    <ul class="list-group mb-4">
        <li v-for="(city, index) in cityList" :key="index" class="list-group-item d-flex justify-content-between align-items-center">
            {{ city.name }}
            <div>
                <button class="btn btn-danger btn-sm me-2" @click="removeCity(index)">&times;</button>
                <button class="btn btn-info btn-sm" @click="selectCity(city)">üå§</button>
            </div>
        </li>
    </ul>

    <div class="alert alert-primary" v-if="cityList.length == 0">Aucune ville saisie.</div>

    <!-- AFFICHAGE M√âT√âO + CARTE -->
    <div v-if="selectedCityWeather" class="weather-card card">
        <div class="card-body">
            <h5 class="card-title">{{ selectedCityWeather.name }}</h5>
            <div class="d-flex align-items-center mb-3">
                <i :class="weatherIcon(selectedCityWeather) + ' weather-icon me-3'"></i>
                <div>
                    <p class="mb-1">Temp√©rature : {{ selectedCityWeather.main.temp }}¬∞C</p>
                    <p class="mb-1">Humidit√© : {{ selectedCityWeather.main.humidity }}%</p>
                    <p class="mb-1">Vent : {{ selectedCityWeather.wind.speed }} m/s</p>
                    <p class="mb-1">Conditions : {{ selectedCityWeather.weather[0].description }}</p>
                    <p class="mb-1">Lever du soleil : {{ sunriseTime(selectedCityWeather) }}</p>
                    <p class="mb-1">Coucher du soleil : {{ sunsetTime(selectedCityWeather) }}</p>
                </div>
            </div>
            <div id="map"></div>
        </div>
    </div>
</div>


<script src="js/libs/vue.js"></script>
<script src="js/libs/bootstrap.bundle.js"></script>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="js/main.js"></script>

</body>
</html>
